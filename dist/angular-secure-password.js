angular.module("angular-secure-password",[]).directive("securePassword",function(){return{restrict:"E",replace:!1,transclude:!1,scope:{buffer:"=typedarray",extended:"=?"},template:'<div style="margin-bottom: 10px;"><span class="secure-input" ng-keypress="append($event)" ng-keydown="alter($event)" tabindex="0"><span ng-repeat="char in notPassword"><span ng-if="$first" style="word-spacing: -10px;">&nbsp;</span><span class="password-symbol">&bull;&nbsp;</span></span><span class="blinking-cursor">|&nbsp;</span><span class="placeholder" ng-if="notPassword.length===0">Password</span></span></div>',link:{pre:function(n,s,e){var a=0,r=n.buffer.length;n.notPassword=[],n.alter=function(s){8===s.keyCode&&a>0&&(n.buffer[--a]=0,n.notPassword.splice(-1,1),t(s))},n.append=function(s){var e=s.charCode,p=e>=32&&126>=e,o=n.extended===!0&&e>=32&&255>=e&&129!==e&&141!==e&&143!==e&&144!==e&&157!==e;a>=0&&r>a&&(p||o)&&(n.buffer[a]=e,n.notPassword.push(a),a++,t(s))},n.$watch("buffer[0]",function(s){0===s&&(n.notPassword=[],a=0)});var t=function(n){n&&(n.preventDefault(),n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)}}}}});
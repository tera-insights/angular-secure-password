angular.module("angular-secure-password",[]).directive("securePassword",function(){return{restrict:"E",replace:!1,transclude:!1,scope:{buffer:"=typedarray",extended:"=?"},template:'<div style="margin-bottom: 10px;"><span class="secure-input" ng-keypress="append($event)" ng-keydown="alter($event)" tabindex="0"><span ng-repeat="char in notPassword"><span ng-if="$first" class="first-symbol">&nbsp;</span><span class="password-symbol">&bull;&nbsp;</span></span><span class="blinking-cursor">|&nbsp;</span><span class="placeholder" ng-if="notPassword.length===0">Password</span></span></div>',link:{pre:function(s,n,e){var a=0,r=s.buffer.length;s.notPassword=[],s.alter=function(n){8===n.keyCode&&a>0&&(s.buffer[--a]=0,s.notPassword.splice(-1,1)),8===n.keyCode&&a>=0&&t(n)},s.append=function(n){var e=n.charCode,o=e>=32&&126>=e,p=s.extended===!0&&e>=32&&255>=e&&129!==e&&141!==e&&143!==e&&144!==e&&157!==e;a>=0&&r>a&&(o||p)&&(s.buffer[a]=e,s.notPassword.push(a),a++,t(n))},s.$watch("buffer[0]",function(n){0===n&&(s.notPassword=[],a=0)});var t=function(s){s&&(s.preventDefault(),s.stopPropagation?s.stopPropagation():s.cancelBubble=!0)}}}}});